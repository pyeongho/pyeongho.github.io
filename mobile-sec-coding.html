<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>모바일앱 보안코딩</title>
    <meta name="description" content="PyeongHo Factory - 즐거운 공장" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- [[! highlight.js ]] -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="PyeongHo Factory" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="PyeongHo Factory" />
    <meta property="og:description" content="즐거운 공장" />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="PyeongHo Factory" />
    <meta name="twitter:description" content="즐거운 공장" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Finding The Way Home",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "즐거운 공장"
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="PyeongHo Factory" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
    
        <li class="nav-android " role="presentation"><a href="/tag/android">Android</a></li>
        <li class="nav-java " role="presentation"><a href="/tag/java">Java</a></li>
        <li class="nav-book " role="presentation"><a href="/tag/book">Book</a></li>
  
        <li class="nav-conference " role="presentation"><a href="/tag/conference">Conference</a></li>
        <li class="nav-githubpage " role="presentation"><a href="/tag/githubpage">githubpage</a></li>
        <li class="nav-ios " role="presentation"><a href="/tag/iOS">iOS</a></li>
        <li class="nav-python " role="presentation"><a href="/tag/python">Python</a></li>
        <li class="nav-security " role="presentation"><a href="/tag/security">Security</a></li>
 
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/assets/images/cover7.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/ghost.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-security">

        <header class="post-header">
            <h1 class="post-title">모바일앱 보안코딩</h1>
            <section class="post-meta">
            <!-- <a href='/'>PyeongHo</a> -->
            <time class="post-date" datetime="2016-12-23">23 Dec 2016</time>
                <!-- [[tags prefix=" on "]] -->
                 
                on 
                
                    
                       <a href='/tag/security'>Security</a>,
                       
                
                    
                       <a href='/tag/OWASP'>Owasp</a>,
                       
                
                    
                       <a href='/tag/시큐어코딩'>시큐어코딩</a>
                       
                
                
            </section>
        </header>

        <section class="post-content">
            
            <h3 id="andorid-java---">andorid-java 시큐어 코딩 가이드</h3>
<p><br /><br /></p>

<table>
  <thead>
    <tr>
      <th>뷴류</th>
      <th>취약점 명칭</th>
      <th>위험도</th>
      <th>CWE-ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>입력데이터 검증 및 표현</td>
      <td>상대 디렉터리 경로 조작</td>
      <td>매우 높음</td>
      <td>CWE-23</td>
    </tr>
    <tr>
      <td>입력데이터 검증 및 표현</td>
      <td>절대 디렉터리 경로 조작</td>
      <td>매우 높음</td>
      <td>CWE-36</td>
    </tr>
    <tr>
      <td>API악용</td>
      <td>Null 매개변수 미검사</td>
      <td>높음</td>
      <td>CWE-398</td>
    </tr>
    <tr>
      <td>API악용</td>
      <td>equals()와 hasCode()하나만 정의</td>
      <td>높음</td>
      <td>CWE-581</td>
    </tr>
    <tr>
      <td>보안특성</td>
      <td>기밀 정보의 단순한 텍스트전송</td>
      <td>높음</td>
      <td>CWE-319</td>
    </tr>
    <tr>
      <td>보안특성</td>
      <td>취악한 암호화 알고리즘의 사용</td>
      <td>높음</td>
      <td>CWE-327</td>
    </tr>
    <tr>
      <td>보안특성</td>
      <td>적절하지 않은 난수 값의 사용</td>
      <td>높음</td>
      <td>CWE-330</td>
    </tr>
    <tr>
      <td>보안특성</td>
      <td>전역적으로 접근가능한 파일</td>
      <td>높음</td>
      <td>-</td>
    </tr>
    <tr>
      <td>보안특성</td>
      <td>외부에서 접근하여 활성화 가능한 컴포넌트</td>
      <td>높음</td>
      <td>-</td>
    </tr>
    <tr>
      <td>보안특성</td>
      <td>공유 아이디에 의한 접근제어통과</td>
      <td>높음</td>
      <td>-</td>
    </tr>
    <tr>
      <td>시간 및 상태</td>
      <td>경쟁 조건 : 검사시점과 사용시점</td>
      <td>높음</td>
      <td>CWE-367</td>
    </tr>
    <tr>
      <td>시간 및 상태</td>
      <td>제대로 제어 되지 않은 재귀</td>
      <td>높음</td>
      <td>CWE-674</td>
    </tr>
    <tr>
      <td>에러처리</td>
      <td>오류 메시지를 통한 정보 노출</td>
      <td>높음</td>
      <td>CWE-209</td>
    </tr>
    <tr>
      <td>에러처리</td>
      <td>오류 상황에 대한 처리  부재</td>
      <td>높음</td>
      <td>CWE-390</td>
    </tr>
    <tr>
      <td>코드 품질</td>
      <td>널 포인터 역 참조</td>
      <td>높음</td>
      <td>CWE-476</td>
    </tr>
    <tr>
      <td>캡슐화</td>
      <td>공용 메소드로부터 리턴 된 private 배열 –유형필드</td>
      <td>높음</td>
      <td>CWE-495</td>
    </tr>
    <tr>
      <td>캡슐화</td>
      <td>private 배열-유형 필드에 공용 데이터 할당</td>
      <td>높음</td>
      <td>CWE-496</td>
    </tr>
    <tr>
      <td>캡슐화</td>
      <td>시스템 데이터 정보누출</td>
      <td>높음</td>
      <td>CWE-497</td>
    </tr>
  </tbody>
</table>

<h4 id="section">1.입력데이터 검증및 표현 상대 디텍토리 조작</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 : 외부의 입력을 통하여 “디렉터리 경로 문자열” 생성이 필요한 경우,
외부 입력 에서 경로조작에 사용될 수 있는 문자를 필터링하지 않으면, 경로에 
대한 문자열이 입력되어 시스템 정보누출, 서비스 장애 등을 유발 시킬 수 있다.</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
  public void f(Properties request) {
    String name = request.getProperty("filename");
    if( name != null ) {
      File file = new File("/usr/local/tmp/" + name);
      file.delete();
    }
  }
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 : 외부 입력값에 대하여 Null 여부를 체크하고, 외부에서 입력되는 파일이름(name)에서 상대경로(/,\,&amp;등의 특수문자)를 설정 할 수 없도록 replaceAll을 이용하여 특수문자를 제거한다.</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
    public void f(Properties request) {
        String name = request.getProperty("filename");
        String dentry = "/usr/local/tmp";
        if ( name != null &amp;&amp; !"".equals(name) ) {
            name = name.replaceAll("/", "");
            name = name.replaceAll("\\", "");
            name = name.replaceAll(".", " ");
            name = name.replaceAll("&amp;", " ");
            name = name + "-report";
            File file = new File(dentry + name);
            if (file != null) file.delete();
        }
    }
</code></p>
  </li>
</ul>

<p><br /></p>

<h4 id="section-1">2.입력데이터 검증및 표현 절대 디텍토리 조작</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 : 외부의 입력으로부터 직접 파일을 생성하게 되는 경우 임의의 파일 이름을 입력 받을 수 있도록  되어있어, 다른 파일에 접근이 가능 해져 의도하지 않은 정보가 노출될 수 있다.</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    File file = new File(android.os.Environment.getExternalStorageDirectory(), "inputFile");
    try {
        InputStream is = new FileInputStream(file);
        Properties props = new Properties();
        props.load(is);
        String name = props.getProperty("filename");
        file = new File("/usr/local/tmp/" + name);
        file.delete();
        is.close();
    } catch (IOException e) {
        Log.w("Error", "", e);
    }
}
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 : 외부의 입력이 파일이름으로 사용될 경우 절대 경로명이 사용되지 못하도록, 문자열이 “\”또는 “/”를 포함하거나 해당 문자열로 시작할 경우 관련동작 수행을 거부하는 것이 바람직하다.</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        File file = new File(android.os.Environment.getExternalStorageDirectory(), "inputFile");
        try {
            InputStream is = new FileInputStream(file);
            Properties props = new Properties();
            props.load(is);
            String name = props.getProperty("filename");
            if (name.indexOf("/") &lt;0) {
                file = new File(name);
                file.delete();
                is.close();
        } catch (IOException e) {
            Log.w("Error", "", e);
        }
    }
</code></p>
  </li>
</ul>

<h4 id="api----null--">3. API 악용 - null 매개변수 미검사</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 : Object.equals(), Comparable.compareTo(), omparator.compare()에서는 매개변수를 null과 비교 해야한다.</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
    public boolean equals(Object object) {
        return (toString().equals(object.toString()));
    }
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 : 매개변수를 null과 비교하는 코드를 작성한다.</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
    public boolean equals(Object object){
        if(object != null)
            return (toString().equals(object.toString()));
        else return false ;
    }
</code></p>
  </li>
</ul>

<h4 id="api----equals-hascode">4. API 악용 - equals와 hasCode정의</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 : equals와 hasCode를 같이 사용하지 않았다<a href="http://egloos.zum.com/playpc/v/1173713">참고링크</a></li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
    public boolean equals(Object obj) {
        if (obj == null)
            return false;
        int i1 = this.hashCode();
        int i2 = obj.hashCode();
        if (i1 == i2)
            return true;
        else
            return false;
    }
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 : equals와 hasCode를 같이 작성하여해결한다.</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
    public boolean equals(Object obj) {
        if (obj == null)
            return false;
        int i1 = this.hashCode();
        int i2 = obj.hashCode();
        if (i1 == i2)
            return true;
        else
            return false;
    }
    @Overide
    public int hashCode() {
        return new HashCodeBuilder(17, 37).toHashCode();
    }
</code></p>
  </li>
</ul>

<h4 id="section-2">5. 보안특성 - 기밀정보의 단순 텍스트 전송</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 : 443 Port로 데이터 외부 전송코드 스니핑이 발생할 수 있다</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p>```java
    public void onCreate(Bundle savedInstanceState) {
        int port = 443;
        String hostname = “hostname”;
        Socket socket = new Socket(hostname, port);</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>    InputStream in = socket.getInputStream();
    OutputStream out = socket.getOutputStream();
    // Read from in and write to out...
    in.close();
    out.close();
} ```
</code></pre>
    </div>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 : 민감한 정보를 전달 할 때에는  일반 소켓보다는 SSL을 사용하여 전송한다.</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
public void onCreate(Bundle savedInstanceState) {
    int port = 443;
    String hostname = "hostname";
    SocketFactory socketFactory = SSLSocketFactory.getDefault();
    Socket socket = socketFactory.createSocket(hostname, , port);
    InputStream in = socket.getInputStream();
    OutputStream out = socket.getOutputStream();
    // Read from in and write to out...
    in.close();
    out.close();
}
</code></p>
  </li>
</ul>

<h4 id="section-3">6. 보안특성 - 취약한 암호화 알고리즘의 사용</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 : 보안적으로 취약하거나 위험한 암호화 알고리즘을 사용했다. RC2,RC4,RC6, MD4,MD5,SHA1,DES.</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p>```java
    public byte[] encrypt(byte[] msg, Key k) {
        byte[] rslt = null;</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>    try {
        //DES 등의 낮은 보안 수준의 알고리즘을 사용하는 것은 안전하지 않다
        Cipher c = Cipher.getInstance("DES");
        c.init(Cipher.ENCRYPT_MODE, k);
        rslt = c.update(msg);
    } catch (InvalidKeyException e) {
    }
    return rslt;
} ```
</code></pre>
    </div>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 : 취약하다고 알려진 알고리즘 대신 AES 알고리즘을 최소한 128비트 길이를 이용하여 사용하는 것이 바람직하다</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p>```java
public byte[] encrypt(byte[] msg, Key k) {
     byte[] rslt = null;</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>try {
    //낮은 보안 수준의 DES알고리즘을 높은 보안 수준의 AES
    // 알고리즘으로 대체한다
    Cipher c = Cipher.getInstance("AES/CBC/PKCS5Padding");
    c.init(Cipher.ENCRYPT_MODE, k);
    rslt = c.update(msg);
} catch (InvalidKeyException e) {
}
return rslt; } ```    
</code></pre>
    </div>
  </li>
</ul>

<h4 id="section-4">7. 보안특성 - 적절하지 않은 난수값의 사용</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 : seed를 설정 할 수 없기 때문에 위험.</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
public double roledice() {
     return Math.random();
}
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 : seed를 설정 하는 코드를 사용.</li>
    </ul>
  </li>
  <li>샘플코드 
<code class="highlighter-rouge">java
public int roledice() {
     Random r = new Random();
    // setSeed
    r.setSeed(new Date().getTime());
    return (r.nextInt()%6) + 1;
}
</code></li>
</ul>

<h4 id="section-5">8. 보안특성 - 전역적으로 접근 가능한 파일</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 : MODE_WORLD_READABLE은 다른 응용프로그램이 접근가능</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
        FileOutputStream fOut = openFileOutput("test",  MODE_WORLD_READABLE);
        OutputStreamWriter out1 = new OutputStreamWriter(fOut);
        out1.write("Hello World");
        out1.close();
        fOut.close();
    } catch (Throwable t) {
    }
}
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 : MODE_PRIVATE을 사용하면 외부에서 접근이 불가능하다</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try {
            FileOutputStream fOut = openFileOutput("test", MODE_PRIVATE);
            OutputStreamWriter out1 = new OutputStreamWriter(fOut);
            out1.write("Hello World");
            out1.close();
            fOut.close();
        } catch (Throwable t) {
        }
    }
</code></p>
  </li>
</ul>

<h4 id="section-6">9. 보안특성 -외부에서 접근하여 활성화 가능한 컴포넌트</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">xml
    &lt;service android:name=".syncadapter.SyncService" android:exported="true"&gt;
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p>```xml</p>
    <service android:name=".syncadapter.SyncService" android:exported="false">
```        

</service>
  </li>
</ul>
<p>#### 10. 보안특성 - 공유 아이디에 의한 접근제어 통과
  - 안전하지 않음 코드
    - 문제점 : 
  - 샘플코드</p>

<div class="highlighter-rouge"><pre class="highlight"><code>```xml
&lt;manifest 
    xmlns:android=http://schemas.android.com/apk/res/android
    package="com.example.android.apis"
    android:versionCode="1"
    android:versionName="1.0"
    android:sharedUserId="android.uid.developer1"&gt;
```
</code></pre>
</div>

<ul>
  <li>안전한 코드
    <ul>
      <li>해결코드 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">xml
&lt;manifest xmlns:android=http://schemas.android.com/apk/res/android
    package="com.example.android.apis"
    android:versionCode="1"
    android:versionName="1.0"&gt;
&lt;!-- android:sharedUserId="android.uid.developer1“ --&gt;
</code></p>
  </li>
</ul>

<h4 id="section-7">11. 보안특성 - 경쟁조건: 검사시점과 사용시점</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p>```java
public class UA367 extends Activity {
    @override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        FileAccessThread fileAccessThread = new FileAccessThread();
        FileDeleteThread fileDeleteThread = new FileDeleteThread();
        fileAccessThread.start();
        fileDeleteThread.start();
    }
}
class FileAccessThread extends Thread {
    public void run() {
        try {
            File f = new File(“Test_367.txt”);
            if (f.exists()) { 
                BufferedReader br = new BufferedReader(new FileReader(f));
                br.close();
            }
        } catch(FileNotFoundException e) {
            System.out.println(“Exception Occurred”);
        }
    }
}</p>

    <p>class FileDeleteThread extends Thread {
    public void run() {
        try {
            File f = new File(“Test_367.txt”);
            if (f.exists()) { 
                f.delete();
            }
        } catch(FileNotFoundException e) {
            System.out.println(“Exception Occurred”);
        } catch(IOException e) {
            System.out.println(“Exception Occurred”);
        }
    }
}
```</p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p>```java
public class SA367 extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            FileAccessThread fileAccess = new FileAccessThread();
            Thread first = new Thread(fileAccess);
            Thread second = new Thread(fileAccess);
            Thread third = new Thread(fileAccess);
            Thread fourth = new Thread(fileAccess);
            first.start();
            second.start();
            third.start();
            fourth.start();
    }<br />
}</p>

    <p>class FileAccessThread implements Runnable {
    public synchronized void run() {
        try {
            File f = new File(“Test.txt”);
            if (f.exists()){
                Thread.sleep(100);
                BufferedReader br = new BufferedReader(new FileReader(f));
                System.out.println(br.readLine());
                br.close();
                f.delete();
            }
        } catch (IOException e) {
            System.err.println(“IOException occured”);
        }
    }
}
```</p>
  </li>
</ul>

<h4 id="section-8">12. 시간 및 상태 - 제대로 제어되지 않은 재귀</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
public int factorial(int n) {
    return n * factorial(n - 1);
}
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
public int factorial(int n) {
    int i;
    if (n == 1) {
        i = 1;
    } else {
        i = n * factorial(n - 1);
    }
    return i;
}
</code></p>
  </li>
</ul>

<h4 id="section-9">13. 에러처리 - 오류 메세지를 통한 정보 노출</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try{ 
        throw new IOException(); 
    }catch (IOException e) { 
        e.printStackTrace(); 
    }
}
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try{
        throw new IOException();
    }catch (IOException e) { 
        System.out.println(“예외발생"); 
    }
}
</code></p>
  </li>
</ul>

<h4 id="section-10">14. 에러처리 - 오류 상황에 대한 처리 부재</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
private Connection conn;
public Connection DBConnect(String url, String id, String password) {
    try {
        String CONNECT_STRING = url + ":" + id + ":" + password;
        InitialContext ctx = new InitialContext();
        DataSource datasource = (DataSource) ctx.lookup(CONNECT_STRING);
        conn = datasource.getConnection();
    } catch (SQLException e) {
        // catch 블록이 비어있음
    } catch (NamingException e) {
        // catch 블록이 비어있음
    }
    return conn;
}
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
private Connection conn;
public Connection DBConnect(String url, String id, String password) {
    try {
        String CONNECT_STRING = url + ":" + id + ":" + password;
        InitialContext ctx = new InitialContext();
        DataSource datasource = (DataSource) ctx.lookup(CONNECT_STRING);
        conn = datasource.getConnection();
    } catch (SQLException e) {
        // Exception catch 이후Exception에 대한 적절한 처리가 필요
        if ( conn != null ) {
            try {
                conn.close();              
            }catch (SQLException e1) { 
                conn = null;
            }
        }
    } catch (NamingException e) {
    // Exception catch 이후Exception에 대한 적절한 처리가 필요
    if ( conn != null ) {
        try {
            conn.close();
        } catch (SQLException e1) { 
            conn = null; 
        }
    }
}
</code></p>
  </li>
</ul>

<h4 id="section-11">15. 코드품질 - 널포인터 역참조</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p>```java
public void f(boolean b) {
    String cmd = System.getProperty(“cmd”);
    cmd = cmd.trim();
    System.out.println(cmd);
}</p>

    <p>```</p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
public void f(boolean b) {
    String cmd = System.getProperty("cmd");
    if (cmd != null) { 
        cmd = cmd.trim();
        System.out.println(cmd);
    } else{
        System.out.println("null command");
    }
}
</code></p>
  </li>
</ul>

<h4 id="private-">16. 캡슐화 - 공용 메소드로 부터 리턴된 private 배열</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
// private인 배열을 public인 메소드가 return한다
private String[] colors;
public String[] getColors() { 
    return colors; 
}
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p>```java
private String[] colors;
//메소드를 private으로 하거나, 복제본 반환,수정하는 public메소드를 별도로 만든다
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String[] newColors = getColors();
}
public String[] getColors() {
    String[] ret = null;
    if ( this.colors != null ) {
        ret = new String[colors.length];
        for (int i = 0; i &lt; colors.length; i++) { ret[i] = this.colors[i]; }
    }
    return ret;
}</p>

    <p>```</p>
  </li>
</ul>

<h4 id="private--">17. 캡슐화 – private배열-유형필드에 공용데이터할당</h4>
<ul>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
// userRoles 필드는 private 이지만 public인 setUserRoles()를 통해 외부의 배열이 할당 되면 사실상 public필드가된다.
private String[] userRoles;
public void setUserRoles(String[] userRoles) {
    this.userRoles = userRoles;
}
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p>```java
// 객체가 클래스의 private member를 수정하지 않도록 한다.
    private String[] userRoles;</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>public void setUserRoles(String[] userRoles) {
    this.userRoles = new String[userRoles.length];
    for (int i = 0; i &lt; userRoles.length; ++i){
        this.userRoles[i] = userRoles[i];
    }
} ```   #### 18. 캡슐화 - 시스템 데이터 정보 누출
</code></pre>
    </div>
  </li>
  <li>안전하지 않음 코드
    <ul>
      <li>문제점 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
public void f() {
    try { 
        g();
    }catch (IOException e) {
        //예외 발생시 printf(e.getMessage())를 통해 
        //오류 메시지 정보가 유출된다.
        System.err.printf(e.getMessage());
    }
}
private void g() throws IOException { …… }
</code></p>
  </li>
  <li>안전한 코드
    <ul>
      <li>해결코드 :</li>
    </ul>
  </li>
  <li>
    <p>샘플코드</p>

    <p><code class="highlighter-rouge">java
    public void f() {
        try { 
            g();
        }catch (IOException e) {
            // end user가 볼수 있는 오류 메시지 정보를 생성하지 않아야 한다.
            System.err.println("IOException Occured");
        }
    }
    private void g() throws IOException { …… }
</code></p>
  </li>
</ul>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/author/PyeongHo" style="background-image: url(/assets/images/casper.png)"><span class="hidden">'s Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/author/PyeongHo">PyeongHo</a></h4>
                
                
                    <p> 즐겁게 또 즐겁게</p>
                
                <div class="author-meta">
                    <span class="author-location icon-location">  KOREA</span> 
                    <span class="author-link icon-link"><a href="https://pyeongho.github.io/"> pyeongho.github.io/</a></span> 
                </div>
            </section>

            <!-- /author  -->

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=모바일앱 보안코딩&amp;url=https://pyeongho.github.io/mobile-sec-coding"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://pyeongho.github.io/mobile-sec-coding"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://pyeongho.github.io/mobile-sec-coding"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
            
            <!-- Add Disqus Comments -->
            
            <div id="disqus_thread"></div>
            <script>
            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
            /*
            var disqus_config = function () {
            this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            */
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '//pyeongho-factory.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            
        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/assets/images/cover7.jpg)" href="/mobile-sec-domestic">
            <section class="post">
                <h2>andorid 취약점</h2>
                <p>#### 2. 국내 모바일 앱 보안점검 체크리스트 [스마트폰 금융안전대책 이행 실태 체크리스트](http://wikisecurity.net/etc:%EC%8A%A4%EB%A7%88%ED%8A%B8%ED%8F%B0_%EA%B8%88%EC%9C%B5%EC%95%88%EC%A0%84%EB%8C%80%EC%B1%85_%EC%9D%B4%ED%96%89%EC%8B%A4%ED%83%9C_%EC%B2%B4%ED%81%AC%EB%A6%AC%EC%8A%A4%ED%8A%B8) | 그룹 |...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/cover6.jpg)" href="/pythonClib">
            <section class="post">
                <h2>python 모듈 만들기,python C 모듈 원형</h2>
                <p>python 사용 할 C 라이브러리 만들기 1. mylib.c 원형 함수를 만든다. python 에서 호출 하는...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">PyeongHo Factory</a> &copy; 2017</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-90332203-1', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
