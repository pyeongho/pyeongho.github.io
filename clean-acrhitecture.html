<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>드로이드나이츠 클린아키텍처 세션</title>
    <meta name="description" content="PyeongHo Factory - 즐거운 공장" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- [[! highlight.js ]] -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="PyeongHo Factory" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="PyeongHo Factory" />
    <meta property="og:description" content="즐거운 공장" />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="PyeongHo Factory" />
    <meta name="twitter:description" content="즐거운 공장" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Finding The Way Home",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "즐거운 공장"
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="PyeongHo Factory" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
    
        <li class="nav-android " role="presentation"><a href="/tag/android">Android</a></li>
        <li class="nav-java " role="presentation"><a href="/tag/java">Java</a></li>
        <li class="nav-book " role="presentation"><a href="/tag/book">Book</a></li>
  
        <li class="nav-conference " role="presentation"><a href="/tag/conference">Conference</a></li>
        <li class="nav-githubpage " role="presentation"><a href="/tag/githubpage">githubpage</a></li>
        <li class="nav-ios " role="presentation"><a href="/tag/iOS">iOS</a></li>
        <li class="nav-python " role="presentation"><a href="/tag/python">Python</a></li>
        <li class="nav-security " role="presentation"><a href="/tag/security">Security</a></li>
 
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/assets/images/cover3.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/ghost.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-conference">

        <header class="post-header">
            <h1 class="post-title">드로이드나이츠 클린아키텍처 세션</h1>
            <section class="post-meta">
            <!-- <a href='/'>PyeongHo</a> -->
            <time class="post-date" datetime="2017-04-08">08 Apr 2017</time>
                <!-- [[tags prefix=" on "]] -->
                 
                on 
                
                    
                       <a href='/tag/conference'>Conference</a>,
                       
                
                    
                       <a href='/tag/클린아키텍처'>클린아키텍처</a>,
                       
                
                    
                       <a href='/tag/드로이드나이츠'>드로이드나이츠</a>
                       
                
                
            </section>
        </header>

        <section class="post-content">
            
            <h4 id="section">드로이드나이츠 클린아키텍처</h4>
<ul>
  <li>드로이드나이츠 컨퍼런스 참가후 작성한 글 입니다.</li>
  <li>
    <p>그중 기억에 남는 클린 아키텍처를 정리 하였습니다.</p>
  </li>
  <li>
    <p><a href="https://speakerdeck.com/sunghyunzz/clean-architecture-in-android/">참고 : https://speakerdeck.com/sunghyunzz/clean-architecture-in-android</a></p>
  </li>
  <li>
    <p><a href="https://realm.io/kr/news/clean-architecture-in-android//">참고 : https://realm.io/kr/news/clean-architecture-in-android/</a></p>
  </li>
  <li><a href="https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html">참고 : https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html</a></li>
</ul>

<h4 id="section-1">1. 변화에 잘 적응하는 아키텍처</h4>
<ul>
  <li>이전 까지 했던 고민이 이걸로 보입니다. 어떤 변화든 잘 적응하는 코드를 만들자</li>
  <li>적응을 잘하는건 변하는 부분만 수정하자 &lt;- 이 부분이 중요</li>
  <li>변화에 잘 대응할 수 있다.</li>
  <li>= 변화에 따른 코드의 변경이 적다.
    <ul>
      <li>테이블 구조를 변경했는데 액티비티를 변경???</li>
    </ul>
  </li>
  <li>= 코드가 잘 분리되어있다.
    <ul>
      <li>잘 분리되어야지 그냥 분리하면 안됨</li>
    </ul>
  </li>
  <li>= 코드가 본질에 맞게 설계되어있다.
    <ul>
      <li>어떻게 레이아웃을 구성할까에 사용할까를 이용하면 안됨</li>
      <li>본질
        <ul>
          <li>도메인의 본질 : 기획자, 디자이너가, 사용자가 받아들이는 형태 일반적으로 보여지는 형태가 바뀌는거지 기본 개념이 변경되지 않음. 가계부를 예로 들어서 소비내역, 지출내역이라는 개념은 변경되지 않는다. 변경되는 어떻게 보여줄지 어떻게 필터링 할지가 변경 되는 거다. 도메인의 본질의 개념을 이해햐자.</li>
          <li>개발구조상의 본질 : 쉐어드프리퍼런스, 렘, sqlite 가 있는데 각가의 사용을 언제든 변경 없이 사용이 가능해야한다!?. 쉐어드 프리퍼런스를 수정 했는데 액티비티 수정을 해야 하면 코드가 잘못 된거다.</li>
          <li>안드로이드 구조 상의 본질 : 안드로이드 라이프사이클등</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="section-2">2. 기본 아키텍처</h4>
<ul>
  <li>엉클밥의 클린아키텍처 서버
    <ul>
      <li>
        <p><img src="https://drive.google.com/uc?id=0BwUadct9RzY3cmtQUjlkYlN5QTg" alt="" /></p>
      </li>
      <li>바깥쪽이 보여주는 부분</li>
      <li>가장안쪽이 개념단위
        <ul>
          <li>프레임워크 독립적
            <ul>
              <li>레트로핏 -&gt; 볼리 로 변경이 쉬움</li>
            </ul>
          </li>
          <li>테스트 가능</li>
          <li>ui 독립적</li>
          <li>db 독립적
            <ul>
              <li>서버에서 사용하던지, 내부에서 사용하던지 중요치 않음</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><img src="https://drive.google.com/uc?id=0BwUadct9RzY3YU9CMXN5S2FTRXc" alt="기본" />
    <ul>
      <li>안드로이드의 계층을 4개로 사용자에게 보여지는 로직과 관련된 Presentation 레이어</li>
      <li>DB, 네트워크를 포함한 데이터를 가져오는 Data 레이어</li>
      <li>사용자의 유스케이스로 분리되는 Domain 레이어
        <ul>
          <li>get트랜잭션</li>
        </ul>
      </li>
      <li>사용자의 개념을 정의하는 Entity 레이어</li>
      <li>이 네 레이어 간의 의존성은 위에서 아래로 발생해야 합니다. 즉, 가장 하단부의 레이어일 수록 가장 의존성이 낮아야 합니다. 가량 프리젠테이션 레이어는 데이터 레이어를 알지만 데이터는 프리젠테이션을 몰라야 하며, 이 덕분에 맨 아래의 엔티티는 순수한 Java 내지는 Kotlin 모듈이 될 수 있습니다. 이런 레이어의 분리 덕분에 본질을 정의할 때 어떤 데이터베이스에 저장될지, 어떤 뷰에서 보일지 고민하지 않고 Entity를 작성할 수 있고, 이에 대한 유스 케이스로 Domain 레이어를 작성할 수 있습니다. 또한 트랜잭션을 가져오는 것을 Data에서, 어떻게 보여줄 것인지를 Presentation에서 고민하면 됩니다.</li>
    </ul>
  </li>
</ul>

<h5 id="entity">2.1 Entity</h5>
<ul>
  <li>순수한 Java(Kotlin) 모듈</li>
  <li>Android와의 의존성이 없음
    <ul>
      <li>엔터티는 안드로이드의 파서러블을 사용할 수 없음</li>
    </ul>
  </li>
  <li>파서러블의 고민은 뷰 모델</li>
  <li>도메인(비즈니스 로직)에서 파생되는 개념을 표현</li>
  <li>(같은 서비스) Android - iOS - 서버 모두 동일한 형태</li>
  <li>아래가 샘플로 보여준 코틀린 코드 입니다. 자바는 코틀린은 모르지만 느낌상으로 같다고 만들어본 코드 입니다.</li>
  <li>가계부에서 소비내역 지출 내역의 변경되지 않는다.</li>
  <li>모든 내용이 엔터티에 포함되어 있다.</li>
  <li>TransactionType 엔터티로 선언한것이다.</li>
  <li>테이블간의 조인을 위해서 트랜잭션 아이디 등은 데이터베이스를 위함이기에 엔터티에서는넣으면 안됨</li>
  <li><code class="highlighter-rouge">kotlin
  class TransactionCategory( 
    val id: String, 
    val name: String, 
    val transactionType: TransactionType, 
    val priority: Int
  ) : Entity
</code></li>
  <li><code class="highlighter-rouge">java
  class TransactionCategory extends Entity( 
    String id; 
    String name;
    TransactionType transactionType;
    Int priority;
  ) : 
</code></li>
</ul>

<h5 id="domain">2.2 Domain</h5>
<ul>
  <li>순수한 Java(Kotlin) 모듈</li>
  <li>Android와의 의존성이 없음</li>
  <li>Use Case</li>
  <li>Repository Interface 정의</li>
  <li>예
    <ul>
      <li>뱅크레포지토리를 주입을 받고</li>
      <li>인터페이스정의만 함</li>
      <li>하는 액션은 getAll</li>
      <li>BanksRepository 는 인터페이스로 존재</li>
      <li>도메인 레이어에 존재</li>
      <li>유스케이스는 데이터베이스를 고려하지 말자</li>
      <li>사고의 흐름</li>
      <li>
        <p>```kotlin
class GetBanks(val repository: BanksRepository) : UseCase&lt;List<bank>&gt;(){ 
  override fun buildUseCaseObservable(): Observable&lt;List<bank>&gt; { 
    return repository.getAll() 
  } 
}</bank></bank></p>

        <p>interface BanksRepository : Repository {<br />
  fun getAll(): Observable&lt;List<bank>&gt; 
  fun update(bank: Bank): Completable 
}</bank></p>

        <p>```</p>
      </li>
    </ul>
  </li>
</ul>

<h5 id="data">2.3 data</h5>
<ul>
  <li>Repository의 실제 구현</li>
  <li>Data Source 의존성</li>
  <li>Android 의존성(어느순간 생기기 시작 가능성)</li>
  <li>데이터베이스 의존성이 생김</li>
  <li>도메인에서 정의한 인터페이스 구현이다. 렘 오브젝트를 엔터티로 변환 한다.</li>
  <li>렘이 sqlite로 변경되면 해당 레이어에서 처리 한다.</li>
  <li>똑같은 도메인의 유지하여 인테페이스를 네트워크로 변경가능하다.</li>
  <li>데이터모델은 렘이 아닌 응답값의 리스폰스로 변경하면 된다.</li>
  <li>예
    <ul>
      <li>
        <script src="https://gist.github.com/pyeongho/a621449874cd17a0c12041baf56fa835.js"></script>
      </li>
    </ul>
  </li>
</ul>

<h5 id="presentation">2.4 Presentation</h5>
<ul>
  <li>UI 레벨의 처리 (mvp, mvc)</li>
  <li>Android 의존성이 강함</li>
  <li>View와 Presenter</li>
  <li>함수 이름도 onViewCreated 처럼 각각의 행동에 맞게
    <ul>
      <li>onNextButtonClicked</li>
    </ul>
  </li>
  <li>내부 로직이 변경되어도 뷰 코드는 변겨이 안됨</li>
  <li>파서러블이 필요할때 프리젠터에서도 뷰 모델이 있고 엔터티를 매핑하여 사용한다.</li>
  <li>예
    <ul>
      <li>
        <script src="https://gist.github.com/pyeongho/618f625aa3f4a212f97197981ed5ea41.js"></script>
      </li>
      <li>
        <script src="https://gist.github.com/pyeongho/6b325023418e98ab2d0a496da91d4087.js"></script>
      </li>
    </ul>
  </li>
</ul>

<h4 id="section-3">3. 좋은 코드가 좋은 제품이다.</h4>
<ul>
  <li>각각의 레이어에서 모델이 존재해서 진입 장벽이 있지만 유지보수가 쉽다.</li>
</ul>

<h4 id="section-4">* 현장 메모</h4>
<ul>
  <li><img src="https://drive.google.com/uc?id=0BwUadct9RzY3cG41UmxfbEN4NjQ" alt="1페이지" /></li>
  <li><img src="https://drive.google.com/uc?id=0BwUadct9RzY3NTNGRVpKLXNSOTg" alt="2페이지" /></li>
</ul>



        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/author/PyeongHo" style="background-image: url(/assets/images/casper.png)"><span class="hidden">'s Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/author/PyeongHo">PyeongHo</a></h4>
                
                
                    <p> 즐겁게 또 즐겁게</p>
                
                <div class="author-meta">
                    <span class="author-location icon-location">  KOREA</span> 
                    <span class="author-link icon-link"><a href="https://pyeongho.github.io/"> pyeongho.github.io/</a></span> 
                </div>
            </section>

            <!-- /author  -->

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=드로이드나이츠 클린아키텍처 세션&amp;url=https://pyeongho.github.io/clean-acrhitecture"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://pyeongho.github.io/clean-acrhitecture"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://pyeongho.github.io/clean-acrhitecture"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
            
            <!-- Add Disqus Comments -->
            
            <div id="disqus_thread"></div>
            <script>
            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
            /*
            var disqus_config = function () {
            this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            */
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '//pyeongho-factory.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            
        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/assets/images/cover3.jpg)" href="/whywhy">
            <section class="post">
                <h2>클린아키텍처 듣기 전부터 고민하던 내용들</h2>
                <p>#### 적용에 앞서 많은 고민중 - 고민은 좋은거. #### 1. MVP등의 각종 패턴은 정말 만능일까?...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/cover4.jpg)" href="/google-drive-for-image">
            <section class="post">
                <h2>구글 드라이브를 이용해서 쉽게 이미지를 올리자</h2>
                <p>맥에서 github page 이미지 쉽게 올리기 깃허브 페이지를 이용중 가장 힘든건 스크린샷을 추가하는 방법이라 생각해서...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">PyeongHo Factory</a> &copy; 2017</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-90332203-1', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
